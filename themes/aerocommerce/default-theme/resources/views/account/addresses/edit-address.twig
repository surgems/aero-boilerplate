{% extends "layouts.main" %}

{% block content %}
    <div class="flex flex-wrap flex-col w-full max-w-3xl mx-auto p-4 pb-8">
        <div class="w-full">
            <h1 class="text-primary text-3xl mt-3 mb-6 text-center">My Account</h1>
        </div>
        <div class="flex flex-wrap w-full">
            <div class="w-1/4 hidden lg:block pr-4">
                <div class="bg-white rounded-lg px-4 py-1 border border-grey-light">
                    {% include "account.partials.menu" %}
                </div>
            </div>
            <div class="w-full lg:w-3/4 bg-white rounded-lg shadow-lg lg:shadow-none p-5 border border-grey-light">
                <h2 class="text-primary mb-5 pb-4 text-xl border-grey-light border-b">Edit Address</h2>
                <p class="mb-5">Update your address details and all future delivery labels will appear exactly as they are below.</p>
                <form action="{{ route('account.edit-address', address) }}" method="post">
                    {{ csrf_field() }}
                    {{ method_field('put') }}
                    <div class="flex flex-wrap">
                        <div class="w-full lg:w-1/2 lg:pr-2">
                            <label for="first_name" class="text-primary-dark text-sm font-semibold block pb-2">First Name</label>
                            {% if errors.has('first_name') %}
                                <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                    <strong>{{ errors.first('first_name') }}</strong>
                                </span>
                            {% endif %}
                            <input id="first_name" type="text" name="first_name" value="{{ old('first_name', address.first_name) }}"
                                   class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                                   autocomplete="given-name"
                                   required>
                        </div>
                        <div class="mt-4 lg:mt-0 w-full lg:w-1/2 lg:pl-2">
                            <label for="last_name" class="text-primary-dark text-sm font-semibold block pb-2">Last Name</label>
                            {% if errors.has('last_name') %}
                                <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                    <strong>{{ errors.first('last_name') }}</strong>
                                </span>
                            {% endif %}
                            <input id="last_name" type="text" name="last_name" value="{{ old('last_name', address.last_name) }}"
                                   class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                                   autocomplete="family-name"
                                   required>
                        </div>
                    </div>
                    <div class="mt-4">
                        <label for="company" class="text-primary-dark text-sm font-semibold block pb-2">Company</label>
                        {% if errors.has('company') %}
                            <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                <strong>{{ errors.first('company') }}</strong>
                            </span>
                        {% endif %}
                        <input id="company" type="text" name="company" value="{{ old('company', address.company) }}"
                               class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                               autocomplete="organization"
                               placeholder="Optional">
                    </div>
                    <div class="mt-4">
                        <label for="line_1" class="text-primary-dark text-sm font-semibold block pb-2">Address Line 1</label>
                        {% if errors.has('line_1') %}
                            <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                <strong>{{ errors.first('line_1') }}</strong>
                            </span>
                        {% endif %}
                        <input id="line_1" type="text" name="line_1" value="{{ old('line_1', address.line_1) }}"
                               class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                               autocomplete="address-line1"
                               required>
                    </div>
                    <div class="mt-4">
                        <label for="line_2" class="text-primary-dark text-sm font-semibold block pb-2">Address Line 2</label>
                        {% if errors.has('line_2') %}
                            <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                <strong>{{ errors.first('line_2') }}</strong>
                            </span>
                        {% endif %}
                        <input id="line_2" type="text" name="line_2" value="{{ old('line_2', address.line_2) }}"
                               class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                               autocomplete="address-line2"
                               placeholder="Optional">
                    </div>
                    <div class="mt-4">
                        <label for="city" class="text-primary-dark text-sm font-semibold block pb-2">City</label>
                        {% if errors.has('city') %}
                            <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                <strong>{{ errors.first('city') }}</strong>
                            </span>
                        {% endif %}
                        <input id="city" type="text" name="city" value="{{ old('city', address.city) }}"
                               class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                               autocomplete="address-level2"
                               required>
                    </div>
                    <div class="mt-4">
                        <label for="zone" class="text-primary-dark text-sm font-semibold block pb-2">County</label>
                        {% if errors.has('zone_name') %}
                            <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                <strong>{{ errors.first('zone_name') }}</strong>
                            </span>
                        {% endif %}
                        <input id="zone" type="text" name="zone_name" value="{{ old('zone_name', address.zone_name) }}"
                               class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                               autocomplete="address-level1"
                               placeholder="Optional">
                    </div>
                    <div class="mt-4 flex flex-wrap">
                        <div class="w-full lg:w-1/2 lg:pr-2">
                            <label for="postcode" class="text-primary-dark text-sm font-semibold block pb-2">Postcode</label>
                            {% if errors.has('postcode') %}
                                <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                    <strong>{{ errors.first('postcode') }}</strong>
                                </span>
                            {% endif %}
                            <input id="postcode" type="text" name="postcode" value="{{ old('postcode', address.postcode) }}"
                                   class="border hover:border-grey-dark focus:border-primary focus:border-2 rounded outline-none focus:outline-none p-3 m-px focus:m-0 w-full"
                                   autocomplete="postal-code"
                                   required>
                        </div>
                        <div class="mt-4 lg:mt-0 w-full lg:w-1/2 lg:pl-2 flex flex-col">
                            <label for="country_code" class="text-primary-dark text-sm font-semibold block pb-2">Country</label>
                            {% if errors.has('country_code') %}
                                <span class="block w-full bg-white border-2 border-red text-red font-bold mb-2 p-3 rounded-lg text-center lg:shadow-md" role="alert">
                                    <strong>{{ errors.first('country_code') }}</strong>
                                </span>
                            {% endif %}
                            <select id="country_code" name="country_code"
                                    class="border hover:border-grey-dark focus:border-primary rounded outline-none focus:outline-none p-3 m-px w-full bg-white h-10 flex-1"
                                    autocomplete="country"
                                    required>
                                {% set primaryCountrySelected = false %}
                                {% for country in primaryCountries %}
                                    {% set selected = country.code == old('country_code', address.country_code) %}
                                    {% set primaryCountrySelected = primaryCountrySelected or selected %}
                                    <option value="{{ country.code }}" {% if selected %}selected{% endif %}>{{ country.name }}</option>
                                {% endfor %}
                                {% if primaryCountries is not empty %}
                                    <option value="" disabled>-------------------</option>
                                {% endif %}
                                {% for country in countries %}
                                    <option value="{{ country.code }}" {% if not primaryCountrySelected and country.code == old('country_code', address.country_code) %}selected{% endif %}>{{ country.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="mt-6 flex items-center justify-end">
                        <button type="submit" class="inline-block border-2 border-primary bg-primary text-white font-bold py-4 px-8 rounded-full outline-none focus:outline-none hover:border-primary-dark hover:bg-primary-dark cursor-pointer transition-fast">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
